<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Hidden Case Game â€” Barbie Edition (BradGPT + Mini-Games, Paused Timer Fix)</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<!-- Intro Screen -->
<div class="intro-screen" id="introScreen">
  <div class="intro-container">
    <h1 class="intro-title">HIDDEN CASE GAME</h1>
    <h2 class="intro-subtitle">Barbie Edition</h2>
    
    <div class="intro-section">
      <label class="intro-label">Number of Teams:</label>
      <div class="player-count-selector">
        <button class="count-btn" data-count="2">2 Teams</button>
        <button class="count-btn active" data-count="3">3 Teams</button>
        <button class="count-btn" data-count="4">4 Teams</button>
      </div>
    </div>

    <div class="intro-section">
      <label class="intro-label">Team Names:</label>
      <div class="name-inputs" id="nameInputs">
        <input type="text" class="name-input" placeholder="Team 1 Name" value="Team 1" maxlength="12">
        <input type="text" class="name-input" placeholder="Team 2 Name" value="Team 2" maxlength="12">
        <input type="text" class="name-input" placeholder="Team 3 Name" value="Team 3" maxlength="12">
        <input type="text" class="name-input" placeholder="Team 4 Name" value="Team 4" maxlength="12" style="display: none;">
      </div>
    </div>

    <div class="intro-section">
      <label class="intro-label">Number of Rounds:</label>
      <div class="setting-input-wrapper">
        <input type="number" class="setting-input" id="roundsInput" min="1" max="50" value="16">
      </div>
    </div>

    <div class="intro-section">
      <label class="intro-label">Wager Per Round:</label>
      <div class="setting-input-wrapper">
        <span class="currency-symbol">$</span>
        <input type="number" class="setting-input" id="wagerInput" min="1" max="1000" value="5" step="1">
      </div>
    </div>

    <div class="intro-section">
      <button class="btn start-game-btn" id="startGameBtn">ðŸŽ® Start Game</button>
    </div>
  </div>
</div>

<div class="wrap" id="gameWrap" style="display: none;">
  <header>
    <div class="brand">HIDDEN CASE GAME â€” Barbie Edition</div>
    <div class="controls">
      <span class="pill">Round <span id="roundNum">1</span>/<span id="roundsPlanned">16</span></span>
      <span class="pill">Prize: $<span id="roundPrize">5</span></span>
      <button class="btn" id="rulesBtn">Rules</button>

      <button class="btn danger" id="newMatchBtn">Reset Game</button>
    </div>
  </header>

  <!-- Scores -->
  <div class="scores">
    <div class="team" id="t0">
      <div class="name">Goldblatt</div>
      <div class="score-wrap">
        <div class="score" id="s0">0</div>
        <div class="winnings" id="w0">Winnings: $0</div>
      </div>
    </div>
    <div class="team" id="t1">
      <div class="name">Larsen</div>
      <div class="score-wrap">
        <div class="score" id="s1">0</div>
        <div class="winnings" id="w1">Winnings: $0</div>
      </div>
    </div>
    <div class="team" id="t2">
      <div class="name">Vogeley</div>
      <div class="score-wrap">
        <div class="score" id="s2">0</div>
        <div class="winnings" id="w2">Winnings: $0</div>
      </div>
    </div>
    <div class="team" id="t3">
      <div class="name">Lewis</div>
      <div class="score-wrap">
        <div class="score" id="s3">0</div>
        <div class="winnings" id="w3">Winnings: $0</div>
      </div>
    </div>
    <div class="pot">
      <small>Round Prize</small>
      <div id="prizeBig" style="font-size:var(--fsScore);font-weight:1000">$5</div>
    </div>
  </div>

  <main>
    <div class="board">
      <div class="topbar">
        <div class="card round-total" id="roundTotalCard">Round Total: <span id="subtotal" class="big">0</span>
          <button class="btn ok" id="bankBtn">ðŸ’° Bank Points</button>
        </div>
        <div class="card">Cases Left: <span id="casesLeft" class="big">0</span></div>
        <div class="card">Round: <span id="roundLabel" class="big">1 of 16</span></div>
        <div class="timer" id="timer">15</div>
      </div>

      <div class="cases" id="cases">
        <div class="idle-msg" id="idleMsg">
          <div style="margin-bottom: 16px;">Ready to start the round?</div>
          <button class="btn ok" id="startBtn">â–¶ Start Round</button>
        </div>
      </div>

      <div class="foot-controls">
        <div class="chips" id="counts"></div>
        <div class="footer-right">
          <button class="btn" id="askBtn">Ask BradGPT</button>
          <span class="pill" id="miniHint">Mini-game in: 5</span>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- Bust overlay -->
<div class="overlay" id="bustOverlay">
  <div class="bust">BUST!</div>
</div>

<!-- +Points overlay -->
<div class="overlay" id="plusOverlay">
  <div class="splashPlus" id="plusTxt">+0</div>
</div>

<!-- Round results -->
<div class="overlay" id="roundOverlay">
  <div class="modal">
    <h2>Round <span id="rNum">1</span> Complete</h2>
    <p>Round scores:</p>
    <div id="roundScores" style="margin:.6em 0 1em;font-weight:1000"></div>
    <div class="big" id="roundWinner">â€”</div>
    <div class="row" style="margin-top:12px;">
      <button class="btn primary" id="nextRoundBtn">Start Next Round</button>
      <button class="btn" id="closeRoundBtn">Close</button>
    </div>
  </div>
</div>

<!-- Match final -->
<div class="overlay" id="finalOverlay">
  <div class="modal">
    <h2>Match Complete</h2>
    <p>Cash won (ties split):</p>
    <div id="finalScores" style="margin:.6em 0 1em;font-weight:1000"></div>
    <div class="big" id="finalWinner">Thanks for playing!</div>
    <div class="row" style="margin-top:12px;">
      <button class="btn primary" id="playAgainBtn">Play Again</button>
      <button class="btn" id="closeFinalBtn">Close</button>
    </div>
  </div>
</div>

<!-- Rules splash (larger) -->
<div class="overlay" id="rulesOverlay">
  <div class="modal">
    <h2>Hidden Case Game</h2>
    <p><b>Open cases, avoid the Bust, bank when you dare.</b></p>
    <ul style="text-align:left; margin:0 auto; width:min(900px, 96%); background: rgba(255,255,255,.65); color:#7a0037; border:2px solid rgba(255,255,255,.9); border-radius:14px; padding:16px; font-weight:800; font-size: clamp(14px,1.6vw,22px);">
      <li><b>Teams:</b> 2-4 teams compete (customize team names on the intro screen).</li>
      <li><b>20 cases</b> per turn: 19 have points, <b>1 Bust (0)</b>. Values reshuffled each turn; the set is the same every time.</li>
      <li>Tap a case â†’ suspenseful flip + big reveal. Safe values add to your Round Total.</li>
      <li><b>Bank Points</b> (button next to Round Total) anytime to lock in the total for your team's turn.</li>
      <li><b>Timer:</b> 15s per decision. It <i>starts only after your first pick</i>, pauses during reveal, and resets after safe picks. Timer at 0 or revealing the Bust ends your turn with 0 for that turn.</li>
      <li><b>Rounds:</b> customizable (set on startup). Prize per round is customizable. Ties or no-score â†’ an extra round is added automatically.</li>
      <li><b>BradGPT:</b> limited uses per turn; freezes time and gives odds + advice.</li>
      <li><b>Mini-games:</b> every 5 safe picks (max 3 per turn). <i>Bonus Cases</i> (-20,+20,+30,+40) or <i>Risk Wheel</i> (+0,+BUST, and additional points). Only the wheel may be passed.</li>
      <li>Starting team rotates each round for fairness.</li>
    </ul>
    <div class="row" style="margin-top:10px">
      <button class="btn" id="closeRulesBtn">Close</button>
    </div>
  </div>
</div>

<!-- BradGPT modal -->
<div class="overlay" id="aiOverlay">
  <div class="modal" id="aiModal">
    <h2>ðŸ¤– BradGPTâ„¢</h2>
    <p id="aiIntro">â€”</p>
    <p><span class="stat safe" id="aiSafe">Safe: 95%</span> <span class="stat risk" id="aiRisk" style="margin-left:8px">(Bust: 5%)</span></p>
    <p id="aiStats" style="opacity:.95">Expected next pick: +â€” â€¢ Highest remaining: â€”</p>
    <p id="aiLeader" style="opacity:.95">â€”</p>
    <div class="advice" id="aiAdvice">â€”</div>
    <div class="row"><button class="btn primary" id="aiCloseBtn">Continue</button></div>
  </div>
</div>

<!-- Mini-game modal -->
<div class="overlay" id="miniOverlay">
  <div class="modal" id="miniModal">
    <h2 id="miniTitle">Mini-Game</h2>
    <p id="miniIntro">â€”</p>
    <div id="miniArea" class="wheelWrap"></div>
    <div class="row" id="miniButtons"></div>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
